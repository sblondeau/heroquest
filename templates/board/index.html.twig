{% extends 'base.html.twig' %}

{% block title %}Hello BoardController!
{% endblock %}

{% block body %}
	<a href="{{path('move', {'direction': 'North'})}}">North</a>
	<a href="{{path('move', {'direction': 'East'})}}">East</a>
	<a href="{{path('move', {'direction': 'South'})}}">South</a>
	<a href="{{path('move', {'direction': 'West'})}}">West</a>

	<div class="board" style="--grid-columns:{{ constant('App\\Controller\\BoardController::BOARD_COLUMNS') }};
														--grid-rows:{{ constant('App\\Controller\\BoardController::BOARD_ROWS') }};">

		{% set directions = ['north', 'south', 'east', 'west'] %}
		{% for tile in boardTiles %}
			{% if tile is not null %}
				<div class="tile
                    {% for direction in directions|filter(direction => attribute(tile, direction) is not null ) %}
                        {{ direction }}-{{ attribute(tile, direction) }}
                    {% endfor %}
                    " style="--tile-background:{{tile.room.color ?? 'grey'}}
                    ">
					{% if tile.occupant is not null %}
						<div class="hero">{{ tile.occupant.name }}</div>
					{% endif %}
				</div>
			{% else %}
				<div class="tile"></div>
			{% endif %}
		{% endfor %}
{{dump(furnitures)}}
		{% for furniture in furnitures %}
			<div class="furniture" 
                style="--furniture-column: {{furniture.rotationPoint.0}} / span {{furniture.data.width}};
                       --furniture-row: {{furniture.rotationPoint.1}} / span {{furniture.data.height}};
                       --furniture-rotate:{{furniture.data.rotation}}rad;"
            >
				{{ furniture.data.name }}
			</div>
		{% endfor %}
	</div>
{% endblock %}
